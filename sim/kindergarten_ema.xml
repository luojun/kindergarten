<!--
  SEA Kindergarten + EMA (ant). Combined scene for continual learning with life (battery/charging).
  Crib, play pen, play yard + one ant. Charging zone in crib; life model in Python.
-->
<mujoco model="kindergarten_ema">
  <compiler angle="radian" coordinate="local" inertiafromgeom="true"/>
  <option timestep="0.002" gravity="0 0 -9.81" integrator="implicit">
    <flag contact="enable"/>
  </option>
  <default>
    <joint armature="0.01" damping="1"/>
    <geom condim="3" friction="0.8 0.4 0.4" margin="0.001" rgba="0.9 0.9 0.9 1"/>
  </default>
  <asset>
    <texture name="floor_tex" type="2d" builtin="checker" rgb1="0.85 0.85 0.85" rgb2="0.7 0.7 0.7" width="64" height="64"/>
    <material name="floor_mat" texture="floor_tex" texrepeat="4 4" reflectance="0.1"/>
    <material name="crib_mat" rgba="0.95 0.95 0.9 1"/>
    <material name="charging_mat" rgba="0.3 0.7 0.4 0.6"/>
    <material name="pen_mat" rgba="0.88 0.88 0.92 1"/>
  </asset>
  <worldbody>
    <light name="main" pos="0 0 2" dir="0 0 -1" diffuse="1 1 1" specular="0.2 0.2 0.2"/>
    <geom name="play_yard" type="plane" pos="0 0 0" size="1.5 1.5 0.01" material="floor_mat"/>
    <body name="crib" pos="0.3 0.3 0">
      <geom name="crib_floor" type="box" size="0.3 0.3 0.01" pos="0 0 0" material="crib_mat"/>
      <geom name="charging_pad" type="cylinder" size="0.12 0.01" pos="0 0 0.005" material="charging_mat" contype="0" conaffinity="0"/>
      <site name="charging_zone" pos="0 0 0.02" size="0.15" rgba="0.2 0.8 0.3 0.4"/>
      <geom name="crib_wall_s" type="box" size="0.3 0.025 0.035" pos="0 -0.325 0.035"/>
      <geom name="crib_wall_n" type="box" size="0.3 0.025 0.035" pos="0 0.325 0.035"/>
      <geom name="crib_wall_w" type="box" size="0.025 0.3 0.035" pos="-0.325 0 0.035"/>
      <geom name="crib_wall_e" type="box" size="0.025 0.3 0.035" pos="0.325 0 0.035"/>
    </body>
    <body name="play_pen" pos="0.6 0.6 0.04">
      <geom name="pen_floor" type="box" size="0.6 0.6 0.04" material="pen_mat"/>
    </body>
    <!-- Sound flower: stationary base, rotating head -->
    <body name="sound_flower" pos="1.0 0.3 0">
      <geom name="flower_base" type="cylinder" size="0.06 0.04" pos="0 0 0.04" rgba="0.4 0.35 0.3 1"/>
      <body name="flower_head" pos="0 0 0.12">
        <joint name="flower_hinge" type="hinge" axis="0 0 1" damping="0.1"/>
        <geom name="flower_head_geom" type="sphere" size="0.08" pos="0 0 0.05" rgba="0.9 0.75 0.2 1"/>
        <site name="flower_anchor" pos="0 0 0.08" size="0.03" rgba="0.9 0.7 0.2 0.5"/>
      </body>
    </body>
    <!-- EMA: ant torso (free joint) + 4 legs, 8 hinge joints -->
    <body name="torso" pos="0.3 0.3 0.08">
      <geom name="torso_geom" size="0.25" type="sphere" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
      <joint name="root" type="free"/>
      <body name="front_left_leg" pos="0 0 0">
        <geom fromto="0 0 0 0.2 0.2 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
        <body name="aux_1" pos="0.2 0.2 0">
          <joint name="hip_1" type="hinge" axis="0 0 1" range="-0.52 0.52"/>
          <geom fromto="0 0 0 0.2 0.2 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
          <body pos="0.2 0.2 0">
            <joint name="ankle_1" type="hinge" axis="-1 1 0" range="0.52 1.22"/>
            <geom fromto="0 0 0 0.4 0.4 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
          </body>
        </body>
      </body>
      <body name="front_right_leg" pos="0 0 0">
        <geom fromto="0 0 0 -0.2 0.2 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
        <body name="aux_2" pos="-0.2 0.2 0">
          <joint name="hip_2" type="hinge" axis="0 0 1" range="-0.52 0.52"/>
          <geom fromto="0 0 0 -0.2 0.2 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
          <body pos="-0.2 0.2 0">
            <joint name="ankle_2" type="hinge" axis="1 1 0" range="-1.22 -0.52"/>
            <geom fromto="0 0 0 -0.4 0.4 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
          </body>
        </body>
      </body>
      <body name="back_leg" pos="0 0 0">
        <geom fromto="0 0 0 -0.2 -0.2 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
        <body name="aux_3" pos="-0.2 -0.2 0">
          <joint name="hip_3" type="hinge" axis="0 0 1" range="-0.52 0.52"/>
          <geom fromto="0 0 0 -0.2 -0.2 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
          <body pos="-0.2 -0.2 0">
            <joint name="ankle_3" type="hinge" axis="-1 1 0" range="-1.22 -0.52"/>
            <geom fromto="0 0 0 -0.4 -0.4 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
          </body>
        </body>
      </body>
      <body name="right_back_leg" pos="0 0 0">
        <geom fromto="0 0 0 0.2 -0.2 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
        <body name="aux_4" pos="0.2 -0.2 0">
          <joint name="hip_4" type="hinge" axis="0 0 1" range="-0.52 0.52"/>
          <geom fromto="0 0 0 0.2 -0.2 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
          <body pos="0.2 -0.2 0">
            <joint name="ankle_4" type="hinge" axis="1 1 0" range="0.52 1.22"/>
            <geom fromto="0 0 0 0.4 -0.4 0" size="0.08" type="capsule" density="5" friction="1 0.5 0.5" rgba="0.8 0.6 0.4 1"/>
          </body>
        </body>
      </body>
    </body>
  </worldbody>
  <actuator>
    <motor name="flower_motor" joint="flower_hinge" ctrlrange="-1 1" gear="5"/>
    <motor name="hip_4" joint="hip_4" ctrlrange="-1 1" gear="150"/>
    <motor name="ankle_4" joint="ankle_4" ctrlrange="-1 1" gear="150"/>
    <motor name="hip_1" joint="hip_1" ctrlrange="-1 1" gear="150"/>
    <motor name="ankle_1" joint="ankle_1" ctrlrange="-1 1" gear="150"/>
    <motor name="hip_2" joint="hip_2" ctrlrange="-1 1" gear="150"/>
    <motor name="ankle_2" joint="ankle_2" ctrlrange="-1 1" gear="150"/>
    <motor name="hip_3" joint="hip_3" ctrlrange="-1 1" gear="150"/>
    <motor name="ankle_3" joint="ankle_3" ctrlrange="-1 1" gear="150"/>
  </actuator>
</mujoco>
